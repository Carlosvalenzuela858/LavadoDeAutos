<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Servicios</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Header con bienvenida -->
  <div class="header-section">
    <h1 class="welcome-title">¬°Hola, {{ currentUser?.nombre }}! üëã</h1>
    <p class="welcome-subtitle">¬øQu√© servicio necesitas hoy?</p>
  </div>

  <!-- Filtros de categor√≠a -->
  <div class="category-filters">
    <ion-chip 
      [class.selected]="categoriaSeleccionada === 'todos'"
      (click)="filtrarPorCategoria('todos')">
      <ion-label>Todos</ion-label>
    </ion-chip>
    <ion-chip 
      [class.selected]="categoriaSeleccionada === 'basico'"
      (click)="filtrarPorCategoria('basico')">
      <ion-label>B√°sico</ion-label>
    </ion-chip>
    <ion-chip 
      [class.selected]="categoriaSeleccionada === 'premium'"
      (click)="filtrarPorCategoria('premium')">
      <ion-label>Premium</ion-label>
    </ion-chip>
    <ion-chip 
      [class.selected]="categoriaSeleccionada === 'completo'"
      (click)="filtrarPorCategoria('completo')">
      <ion-label>Completo</ion-label>
    </ion-chip>
  </div>

  <!-- Lista de servicios -->
  <div class="services-list">
    <div class="service-card" *ngFor="let servicio of serviciosFiltrados">
      <div class="service-header">
        <div class="service-icon">{{ servicio.imagen }}</div>
        <div class="service-info">
          <h3 class="service-name">{{ servicio.nombre }}</h3>
          <p class="service-description">{{ servicio.descripcion }}</p>
          <div class="service-details">
            <span class="service-duration">‚è±Ô∏è {{ servicio.duracion }} min</span>
          </div>
        </div>
      </div>
      <div class="service-footer">
        <span class="service-price">{{ formatearPrecio(servicio.precio) }}</span>
        <ion-button 
          class="btn-reserve"
          (click)="abrirModalReserva(servicio)">
          Reservar
        </ion-button>
      </div>
    </div>
  </div>

  <!-- Modal de Reserva -->
  <ion-modal [isOpen]="showReservaModal" (didDismiss)="cerrarModalReserva()">
    <ng-template>
      <ion-header>
        <ion-toolbar color="primary">
          <ion-title>Reservar Servicio</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="cerrarModalReserva()">
              <ion-icon name="close"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>

      <ion-content class="modal-content">
        <div class="modal-service-info" *ngIf="servicioSeleccionado">
          <div class="modal-icon">{{ servicioSeleccionado.imagen }}</div>
          <h2>{{ servicioSeleccionado.nombre }}</h2>
          <p class="modal-price">{{ formatearPrecio(servicioSeleccionado.precio) }}</p>
        </div>

        <div class="reservation-form">
          <div class="form-group">
            <ion-label class="form-label">Fecha</ion-label>
            <ion-item lines="none" class="input-field">
              <ion-input
                type="date"
                [(ngModel)]="fechaSeleccionada"
                (ionChange)="onFechaChange()"
                [min]="fechaSeleccionada"
              ></ion-input>
            </ion-item>
          </div>

          <div class="form-group">
            <ion-label class="form-label">Horario</ion-label>
            <div class="time-slots">
              <div 
                *ngFor="let horario of horariosDisponibles"
                class="time-slot"
                [class.selected]="horaSeleccionada === horario.hora"
                [class.disabled]="!horario.disponible"
                (click)="horario.disponible && seleccionarHora(horario.hora)">
                {{ horario.hora }}
              </div>
            </div>
          </div>

          <ion-button
            expand="block"
            class="btn-primary confirm-button"
            [disabled]="!horaSeleccionada"
            (click)="confirmarReserva()">
            Confirmar Reserva
          </ion-button>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
